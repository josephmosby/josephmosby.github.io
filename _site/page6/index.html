<!doctype html>
<html>
	<head>

		<title>josephmosby.com</title>
		<meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="/stylesheets/fibonacci.css" />
		<link rel="stylesheet" href="/stylesheets/custom.css" />

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

	</head>

	<body>

		<div class="wrapper" id="header">
			<div class="container">
				<div class="row">
					<div class="col-13">
						<a href="/"><h3>JOSEPH MOSBY</h3></a>

						<ul class="menu inline">
							<li><a href="/about">about</a></li>
							<li><a href="/projects">projects</a></li>
							<li><a href="/presentations">presentations</a></li>
							<li><a href="/now">now</a></li>
							<li><a href="/feed/atom.xml">subscribe</a></li>
						</ul>

						<a id="hamburger" href="#">MENU</a>
					</div>
				</div>
			</div>
		</div>

		<div class="wrapper" id="dropdown">
			<div class="container">
				<div class="row">
					<div class="col-13">
						<ul class="menu dropdown">
							<li><a href="/about">about</a></li>
							<li><a href="/projects">projects</a></li>
							<li><a href="/presentations">presentations</a></li>
							<li><a href="/now">now</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>

		<div class="wrapper" id="main">
			<div class="container">
				
<div class="row">
	<div class="col-3">
		<a href="/2015/01/29/exploring-the-math-module.html"><h3>Exploring the math module</h3></a>
		<div class="date">January 29, 2015</div>
	</div>
	<div class="col-8">
		<p>I could write code for days using the <code>math</code> module and never hit the end. <code>math</code> is huge. It’s designed to keep you from rewriting a stack of mathematical functions that someone had inevitably written before (formulas for calculating the sine, cosine, tangent, etc). </p>

<p>So rather than write a stack of example code, let’s instead discuss what <code>math</code> can do for you. <code>math</code> can do any of these functions on integers only - <code>cmath</code> provides the same, but allows complex numbers.</p>

<h3 id="number-theoretic-and-representation-functions">Number-theoretic and representation functions</h3>

<p>These functions deal with a few basic theoretical calculations that didn’t quite fit anywhere else. Things like <code>factorial()</code>, <code>fabs()</code> (which calculates absolute value), and <code>modf()</code> which returns the fractional and integer parts of a float can all be found here. </p>

<h3 id="power-and-logarithmic-functions">Power and logarithmic functions</h3>

<p>As can be expected, you’ll find things with exponents and logarithms here. Need to calculate e^x? Use <code>exp(x)</code>. Need to get x^y? Use <code>pow(x, y)</code>. Logarithms use <code>log(x, [base])</code>. Easy stuff here.</p>

<h3 id="trigonometric-functions">Trigonometric functions</h3>

<p>This is where all of the trigonometric functions live: things like <code>sin(x)</code>, <code>cos(x)</code>, <code>tan(x)</code>. I wish I’d known about this in the eleventh grade with Mrs. May. </p>

<h3 id="angular-conversion-functions">Angular conversion functions</h3>

<p>Need to go from degrees to radians? Use <code>radians(x)</code>. Need to go from radians to degrees? Use <code>degrees(x)</code>.</p>

<h3 id="hyperbolic-functions">Hyperbolic functions</h3>

<p>I never used these in eleventh grade and am only moderately aware of what they do. If you need the hyperbolic tangent of x - <code>tanh(x)</code> - or the inverse hyperbolic cosine - <code>acosh(x)</code> - this is where to look. </p>

<h3 id="error-functions">Error functions</h3>

<p>Same thing for error functions. I am not proud of how much math I don’t know right now.</p>

<h3 id="constants">Constants</h3>

<p>These I’ve got, though! This is where <code>pi</code> and <code>e</code> live.</p>

<p><code>math</code> is great, and if you’re going to using Python for statistical or scientific computing, it’s a must-know. </p>

		<a class="twitter-share-button" href="http://twitter.com/share" data-url="http://josephmosby.com/2015/01/29/exploring-the-math-module.html" data-via="josephmosby">Tweet</a>
	</div>
</div>

<div class="row">
	<div class="col-3">
		<a href="/2015/01/23/object-presentation-with-pprint.html"><h3>Object presentation with pprint</h3></a>
		<div class="date">January 23, 2015</div>
	</div>
	<div class="col-8">
		<p>In my <a href="/2015/01/21/string-presentation-with-textwrap.html">last post</a>, I discovered that there are all sorts of awesome things you can do to format strings for presentation in a Python program. In this episode, I learn that it’s possible to do the same thing with all Python objects using <code>pprint</code>!</p>

<p>Let’s crack it open and get to some pretty-printing!</p>

<pre><code>import pprint

pp = pprint.PrettyPrinter(indent=4, width=60)
</code></pre>

<p>Okay, I’ve implemented a <code>PrettyPrinter</code> object that expects to indent things at the four-space mark and each line can only be 60 characters long. Cool. </p>

<pre><code>team = ['We', 'live', 'in', 'cities', 'you\'ll', 'never', 'see', 'on', 'screen', 'not', 'very', 'pretty', 'but', 'we', 'sure', 'know', 'how', 'to', 'run', 'things']

# yes, that is a list of words in the chorus of Lorde's "Team"

pp.pprint(team)
</code></pre>

<p>Okay, awesome. I now print everything on its own line with a slight indentation. </p>

<p>What happens if I throw a custom object at it?</p>

<pre><code>class Dog:
	def __init__(self, name, owner):
		self.name = name
		self.owner = owner

my_dog = Dog('Rufus', 'Joe')

pp.pprint(my_dog) # &lt;__main__.Dog instance at 0x1007ebc20&gt;
</code></pre>

<p>Oh, that’s disappointing. I was	hoping I’d get a nifty way of doing this without having to define a custom <code>repr()</code> method on <code>Dog</code>. Ah well.</p>

<p>So <code>pprint</code> does some stuff awesome, and some stuff… not as awesome. Onward!</p>

		<a class="twitter-share-button" href="http://twitter.com/share" data-url="http://josephmosby.com/2015/01/23/object-presentation-with-pprint.html" data-via="josephmosby">Tweet</a>
	</div>
</div>

<div class="row">
	<div class="col-3">
		<a href="/2015/01/21/string-presentation-with-textwrap.html"><h3>String presentation with textwrap</h3></a>
		<div class="date">January 21, 2015</div>
	</div>
	<div class="col-8">
		<p>I haven’t written that many programs that run solely from the command line with a lot of user instructions incorporated into the program flow, so I haven’t done much Python display text processing. But if I had, <code>textwrap</code> would very likely be one of my best friends.</p>

<p>The <code>textwrap</code> module is designed to wrap text, produce some formatted paragraphs, or totally strip out indentation from strings. It’s there for your convenience. Let’s take a look at what it can do:</p>

<pre><code>import textwrap

my_string = "The textwrap module is designed to wrap text, produce some formatted paragraphs, or totally strip out indentation from strings. It's there for your convenience. Let's take a look at what it can do:"

print my_string

print textwrap.wrap(my_string, 60)
</code></pre>

<p>Whoa whoa whoa there, that’s some weirdness. I’ve clearly got a cut-up string there, but it’s in list format. Let’s clean that up a bit:</p>

<pre><code>print "\n".join(textwrap.wrap(my_string, 60))
</code></pre>

<p>But wait a second, that seems like writing a bunch of characters that I didn’t want to write. Let’s use <code>fill()</code>!</p>

<pre><code>print textwrap.fill(my_string)
</code></pre>

<p>Okay, so <code>fill()</code> pretty much does the exact same thing as <code>wrap()</code>, but it automatically joins everything and adds some newlines in. </p>

<p>Now let’s fiddle around with <code>dedent()</code>:</p>

<pre><code>my_string = "\t\t" + my_string

print my_string

print textwrap.dedent(my_string)
</code></pre>

<p>I’ve added in some tabs here just to showcase what <code>dedent()</code> is designed to do. You can add whitespace to the beginning of your strings - such as if you wanted to include paragraphs in the source code - but then strip it out for presentation in your app.</p>

<p>And that’s a <code>textwrap</code>!</p>

		<a class="twitter-share-button" href="http://twitter.com/share" data-url="http://josephmosby.com/2015/01/21/string-presentation-with-textwrap.html" data-via="josephmosby">Tweet</a>
	</div>
</div>

<div class="row">
	<div class="col-3">
		<a href="/2015/01/20/a-short-word-on-stringio.html"><h3>A short word on StringIO</h3></a>
		<div class="date">January 20, 2015</div>
	</div>
	<div class="col-8">
		<p>The <code>StringIO</code> library has a nifty purpose. It provides you with a buffer in memory that allows you to read and write strings without saving a file to disk. </p>

<pre><code>import StringIO

output = StringIO.StringIO()

output.write('This is a string!\n')
output.write('This is a second line string!')
</code></pre>

<p>Okay, so we’ve got ourselves a string buffer with some strings. Now what can we do?</p>

<pre><code>print output.read()
</code></pre>

<p>Wait… that didn’t really do anything. Ah yes! Because it’s a file-like object, we have to return to the beginning of the object to read it again.</p>

<pre><code>output.seek(0)
print output.read()
</code></pre>

<p>Anything you can do with a file, you can do with this string buffer. It’s quite useful for capturing output or dealing with test cases like these. And in the event that you need a much faster cousin, <code>StringIO</code> comes with a <code>cStringIO</code> <a href="/2015/01/12/storing-objects-with-the-best-named-module-ever-pickle.html">just like our</a> <code>pickle</code> module came with its <code>cPickle</code>. We’ll see this again in future test applications.</p>

		<a class="twitter-share-button" href="http://twitter.com/share" data-url="http://josephmosby.com/2015/01/20/a-short-word-on-stringio.html" data-via="josephmosby">Tweet</a>
	</div>
</div>

<div class="row">
	<div class="col-3">
		<a href="/2015/01/18/examining-audio-files-with-sndhdr.html"><h3>Examining audio files with sndhdr</h3></a>
		<div class="date">January 18, 2015</div>
	</div>
	<div class="col-8">
		<p>In our <a href="/2015/01/17/the-images-are-coming-from-inside-the-bytestreams.html">last installment</a>, we cracked open some image files and looked at the raw bytestreams to assess what type of image file we were looking at. Python’s <code>imghdr</code> module is designed to automate all of that at need. Python provides a companion library, <code>sndhdr</code>, to do the exact same thing for sound files. </p>

<p>Did you know, for example, that all .aif files start with “FO RM,” followed by characters indicating the file size, followed by “AIFF?” I didn’t know that. MP3 files start with characters to synchronize the frames, followed by the MPEG version. Python is here to automatically check all of this for you.</p>

<pre><code>import sndhdr

print sndhdr.what('snowman.mp3') # 'mp3'
</code></pre>

<p>Go forth and examine audio files, my friends.</p>

		<a class="twitter-share-button" href="http://twitter.com/share" data-url="http://josephmosby.com/2015/01/18/examining-audio-files-with-sndhdr.html" data-via="josephmosby">Tweet</a>
	</div>
</div>

<div class="row">
	<div class="col-3">
		<a href="/2015/01/17/the-images-are-coming-from-inside-the-bytestreams.html"><h3>The images are coming from INSIDE the bytestreams</h3></a>
		<div class="date">January 17, 2015</div>
	</div>
	<div class="col-8">
		<p>Okay, let’s first clarify that I’ve been working with digital images for longer than I’m comfortable with to just now learn how to do this. But that’s neither here nor there. Obviously, images are streams of bytes just like every other piece of information stored on your computer. And obviously, there’s got to be something inherent in the byte stream and how it’s encoded that tells the computer how to open it. There’s something that makes a PNG different from a TIFF, and the computer knows how the difference between the two. But how? How does a computer know when it’s looking at a PNG or a TIFF when it starts to read the file? </p>

<p>The answer, my friends, is in the byte stream. I just learned how to read it with mine own two eyes and I am very excited to share this knowledge with you. </p>

<p>Open up a PNG file with your code-writing text editor of choice (I know this will work in Sublime). You’ll have a massive eight-column byte stream open up in front of you, and you’ll also notice that it starts with these characters: <code>8950 4e47 0d0a</code>. Those are hex codes, and they mean something very specific: <code>‰P NG \r\n</code>. This is the universal sign of a PNG file, and you’ll find it on any PNG file that you open! </p>

<p>Now do the same with a TIFF file. You’ll notice the file starts with the following hex codes: <code>4d4d 002a 0000</code>. That stands for <code>MM NUL* NULNULNULNUL</code>. The MM, in this instance, signals the computer that we’re working in a big-endian data format. We then have a null character and an asterisk - which also corresponds to the number 42. The 42 here is chosen for its “<a href="http://www.douglasadams.eu/en_h2g2_references.php">deep philosophical significance</a>.” If you see the byte order and 42, you’ve got a TIFF file!</p>

<p>Chances are that you won’t want to visually inspect your image files to see what they are all the time, so Python has provided a helper library to do that: <code>imghdr</code>. It has one function:</p>

<pre><code>import imghdr

print imghdr.what('snowman.tiff') # 'tiff'
</code></pre>

<p>The <code>what(filename)</code> function is used to detect file format. It can do so for the following image types: RGB, GIF, PBM, PPM, TIFF, RAST, XBM, JPEG, BMP, PNG. </p>

<p>Go forth and read bytestreams!</p>

		<a class="twitter-share-button" href="http://twitter.com/share" data-url="http://josephmosby.com/2015/01/17/the-images-are-coming-from-inside-the-bytestreams.html" data-via="josephmosby">Tweet</a>
	</div>
</div>

<div class="row">
	<div class="col-3">
		<a href="/2015/01/15/mostly-insecure-cryptography-and-crypt.html"><h3>Mostly insecure cryptography and crypt()</h3></a>
		<div class="date">January 15, 2015</div>
	</div>
	<div class="col-8">
		<p>In the 1970s, DES was all the rage. The Data Encryption Standard was the standard for encryption of federal government data and everything unclassified was expected to use it. The algorithm uses a 56-bit key size and some NSA-suggested substitution boxes to encrypt and decrypt data. It was great for the 1970s, but we knew it was susceptible to brute-force attacks then - and in the 1990s, DES was finally cracked. It’s since been replaced by more robust cryptographic algorithms, but it remains a part of the legacy Unix codebase via the <code>crypt(3)</code> tool. </p>

<p>Because you might need to one day access legacy systems where data is encrypted using <code>crypt(3)</code>, Python has provided a helpful little module with <code>crypt</code>. It has a single function: <code>crypt.crypt(word, salt)</code>, where the word represents the data to be encrypted and the salt is a two-character alphanumeric string. It’s as easy as would be expected:</p>

<pre><code>import crypt

print crypt.crypt('hello there', 'ht') # ht5gSI1o04H8I
</code></pre>

<p>And with just that simple function, we have an DES-encrypted password for use on a legacy Unix system. In case you ever need one.</p>

		<a class="twitter-share-button" href="http://twitter.com/share" data-url="http://josephmosby.com/2015/01/15/mostly-insecure-cryptography-and-crypt.html" data-via="josephmosby">Tweet</a>
	</div>
</div>

<div class="row">
	<div class="col-3">
		<a href="/2015/01/14/did-you-know-theres-a-color-system-called-yiq.html"><h3>Did you know there's a color system called YIQ?</h3></a>
		<div class="date">January 14, 2015</div>
	</div>
	<div class="col-8">
		<p>I certainly didn’t. YIQ is used if you’re building software that’s going to transmit over NTSC (broadcast television). YIQ contains information about the luminance and chrominance of colors. Luminance, as we might expect, can be measured on a spectrum from totally white to totally black. <a href="http://wolfcrow.com/blog/understanding-luminance-and-chrominance/">Chrominance is the color information in a signal</a>. These two values merge together in the YIQ data format, where Y represents luminance information, and I and Q represent chrominance information.</p>

<p>In the event that you are ever building software that must make use of the YIQ color format but you’re really only great at dealing with RGB, Python is happy to accommodate you! The <code>colorsys</code> module provides color format conversions between RGB, YIQ, HLS and HSV. It works about how you’d expect:</p>

<pre><code>import colorsys

print colorsys.rgb_to_yiq(82, 0, 99)

print colorsys.yiq_to_rgb(35.49, 17.52, 47.91)

print colorsys.rgb_to_hls(82, 0, 99)

print colorsys.hls_to_rgb(0.833, 49.5, -1.020619)

print colorsys.rgb_to_hsv(82, 0, 99)

print colorsys.hsv_to_rgb(0.833333333, 1, 99)
</code></pre>

<p>And that’s it - just those six functions for all of the color conversions you’ll ever need when dealing with coordinate-based color systems.</p>

		<a class="twitter-share-button" href="http://twitter.com/share" data-url="http://josephmosby.com/2015/01/14/did-you-know-theres-a-color-system-called-yiq.html" data-via="josephmosby">Tweet</a>
	</div>
</div>

<div class="row">
	<div class="col-3">
		<a href="/2015/01/13/combining-pickle-and-anydbm-to-form-shelve.html"><h3>Combining pickle and anydbm to form shelve</h3></a>
		<div class="date">January 13, 2015</div>
	</div>
	<div class="col-8">
		<p>Now that we’ve talked about both <a href="http://josephmosby.com/2015/01/12/storing-objects-with-the-best-named-module-ever-pickle.html">pickle</a> and <a href="http://josephmosby.com/2014/12/22/dbm-non-relational-databases-before-that-was-a-thing.html">anydbm</a>, we can now talk about marrying the two with <code>shelve</code>. The <code>shelve</code> module brings <code>pickle</code> functionality to dbm-style databases, allowing us to store massive data entries in dictionary form without the expected performance hit. It’s the middle option between a full-on database implementation and simple flat file storage. </p>

<p>We create a new shelf like so:</p>

<pre><code>import shelve

s = shelve.open('shelving', flag='c') # the open() method is a wrapper around anydbm.open()

s['name'] = "Joe"

s.close()
</code></pre>

<p>A shelf is created by using the <code>shelve</code> module’s <code>open()</code> method, a wrapper around <code>anydbm.open()</code>. Once we have that shelf, we can treat it much like we would a dictionary. We save a value by specifying a dictionary key/value pair. Finally, we close the filestream. </p>

<p>Reading data from the shelf is equally simple:</p>

<pre><code>import shelve

s = shelve.open('shelving', flag='r')

print s['name']

s.close()
</code></pre>

<p>By default, a shelf does not save modifications to volatile object structure. We see this in the following example:</p>

<pre><code>import shelve

s = shelve.open('shelving', flag='c') # the open() method is a wrapper around anydbm.open()

s['name'] = {}

s.close()

s = shelve.open('shelving')

s['name']['fname'] = 'Joe'
s['name']['lname'] = 'Mosby'

s.close()

s = shelve.open('shelving')

print s['name'] # will print {}

s.close()
</code></pre>

<p>However, if we enable <code>writeback</code> when we open the shelf, we can make direct changes to an object. (warning: performance will take a hit as this will open a potentially massive object in memory)</p>

<pre><code>import shelve

s = shelve.open('shelving', flag='c') # the open() method is a wrapper around anydbm.open()

s['name'] = {}

s.close()

s = shelve.open('shelving', writeback=True)

s['name']['fname'] = 'Joe'
s['name']['lname'] = 'Mosby'

s.close()

s = shelve.open('shelving')

print s['name'] # will print {'fname': 'Joe', 'lname': 'Mosby'}

s.close()
</code></pre>

<p>And that’s where we stand with <code>shelve</code>. Not too much to it - just a little persistence library built for a very niche database format.</p>

		<a class="twitter-share-button" href="http://twitter.com/share" data-url="http://josephmosby.com/2015/01/13/combining-pickle-and-anydbm-to-form-shelve.html" data-via="josephmosby">Tweet</a>
	</div>
</div>

<div class="row">
	<div class="col-3">
		<a href="/2015/01/12/storing-objects-with-the-best-named-module-ever-pickle.html"><h3>Storing objects with the best-named module ever, pickle</h3></a>
		<div class="date">January 12, 2015</div>
	</div>
	<div class="col-8">
		<p>I love <code>pickle</code>. I love that Python has a module named pickle. I have never used pickle before, but I like that it’s there. Let’s take a look at what pickle does.</p>

<p>Per the docs, <code>pickle</code> provides an algorithm for serializing and unserializing a Python object. When we pickle an object, we turn it into a stream of bytes that can be sent to another process or saved to a file to be reconstructed at a later time. You still have to define the class in the namespace of the process reading the pickle - a pickled object comes with object data but no way to tell the program about an object type that’s not already in the process namespace. <code>pickle</code> also comes with a faster <code>cPickle</code> companion that’s written in C to make it super fast. </p>

<p>We can kick things off like so:</p>

<pre><code>import pickle

class Cucumber:

	def __init__(self, height):
		self.height = height

	def grow(self):
		self.height += 1
		return "Current height is: ", str(self.height)

veggie = Cucumber(2)
veggie.grow()

print pickle.dumps(veggie)

veggie.grow()

print pickle.dumps(veggie)
</code></pre>

<p>Here, I have created a <code>Cucumber</code> object type and given it a method <code>grow()</code>, which will increment its height. Calling the <code>pickle.dumps()</code> method on an instance of our <code>Cucumber</code> yields a short string of ASCII characters as a representation of our object. </p>

<p>I can also save objects to files and reload them in perfect condition:</p>

<pre><code>veggie_two = Cucumber(4)

file_save = open('pickled_veggies', 'w')

pickle.dump(veggie_two, file_save)

file_save.close()

file_read = open('pickled_veggies', 'r')

veggie_three = pickle.load(file_read)

print "Veggie Three Height: ", str(veggie_three.height)
</code></pre>

<p><code>pickle</code>’s <code>dump()</code> mechanism (not <code>dumps()</code> with a ‘s’) is used to save these ASCII object strings to a file, and <code>load()</code> is used to read them back from that file. <code>loads()</code> would read them from a string. </p>

<p>And that’s what <code>pickle</code> does, simply and well. It makes your objects into strings, light, compact and ready to be stored forever. </p>

		<a class="twitter-share-button" href="http://twitter.com/share" data-url="http://josephmosby.com/2015/01/12/storing-objects-with-the-best-named-module-ever-pickle.html" data-via="josephmosby">Tweet</a>
	</div>
</div>


<div class="row">
	<div class="col-offset-3 col-8">
		<div class="pagination">
			
			<a href="/page5" class="previous">Previous</a>
			

			<span class="page_number">Page: 6 of 9</span>

			
			<a href="/page7" class="next">Next</a>
			
		</div>
	</div>
</div>
			</div>
		</div>

		<div class="wrapper" id="footer">
			<div class="container">
				<div class="row">
					<div class="col-13">
						<p>Brought to you live from Washington, D.C.</p>
					</div>
				</div>
			</div>
		</div>

		<script src="app.js"></script>

		<script>
	
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'UA-45638065-1', 'josephmosby.com');
	    ga('send', 'pageview');
	  
	  	</script>

  		<script>
		window.twttr=(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);t._e=[];t.ready=function(f){t._e.push(f);};return t;}(document,"script","twitter-wjs"));
		</script>

	</body>

</html>