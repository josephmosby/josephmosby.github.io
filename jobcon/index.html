<!doctype html>
<html>
<body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script src="./springy.js"></script>
<script src="./springyui.js"></script>
<script>
var jsonObjs = [
	{
		person: 'Joe Mosby',
		color: '#770000',
		bio: 'Joe Mosby is lorem ipsum',
		jobs: [
			'Routeam',
			'Deloitte',
			'APCO Worldwide',
			'National Journal'
		]
	},
	{
		person: 'Sophie Quinton',
		color: 'FF0044',
		jobs: [
			'National Journal',
			'Pew Charitable Trusts'
		]
	},
	{
		person: 'Alex Laughlin',
		color: 'DD00DD',
		jobs: [
			'USA Today',
			'HLN',
			'National Journal',
			'Washington Post',
		]
	},
	{
		person: 'Tim Alberta',
		color: '#005566',
		jobs: [
			'Wall Street Journal',
			'Politico',
			'National Journal'
		]
	},
	{
		person: 'Andrew McGill',
		color: '#550055',
		jobs: [
			'Pittsburgh Post-Gazette',
			'National Journal'
		]
	},
	{
		person: 'Lindsey Taylor',
		color: '#00DD33',
		jobs: [
			'APCO Worldwide',
			'National Journal'
		]
	},
	{
		person: 'Priscilla Alvarez',
		color: '#EEDDCC',
		jobs: [
			'USA Today College',
			'National Journal'
		]
	},
	{
		person: 'Sam Baker',
		color: '#CCDDEE',
		jobs: [
			'Inside Health Policy',
			'The Hill',
			'National Journal'
		]
	},
	{
		person: 'Dan Berman',
		color: '#AADDCC',
		jobs: [
			'Greenwire',
			'E&E Daily',
			'Politico',
			'National Journal'
		]
	},
	{
		person: 'Matt Berman',
		color: '#336699',
		jobs: [
			'Salon',
			'Talking Points Memo',
			'Newsweek',
			'The Faster Times',
			'Carnegie Endowment for International Peace',
			'National Journal'
		]
	},
	{
		person: 'Janie Boschma',
		color: '#226688',
		jobs: [
			'Washington Post',
			'Yomiuri Shimbun',
			'National Journal'
		]
	},
	{
		person: 'Ronald Brownstein',
		color: '#994455',
		jobs: [
			'National Journal',
			'Los Angeles Times',
			'National Journal'
		]
	},
	{
		person: 'Karyn Bruggeman',
		color: '#994455',
		jobs: [
			'Politico',
			'Atlas Project',
			'National Journal'
		]
	},
	{
		person: 'Nora Caplan-Bricker',
		color: '#994455',
		jobs: [
			'New York Magazine',
			'The New Republic',
			'National Journal'
		]
	},
	{
		person: 'Andie Coller',
		color: '#445599',
		jobs: [
			'New York Post',
			'Politico',
			'National Journal'
		]
	},
	{
		person: 'George Condon',
		color: '#BB44AA',
		jobs: [
			'San Diego Union Tribune',
			'Copley News Service',
			'National Journal'
		]
	},
	{
		person: 'Nancy Cook',
		color: '#AACCEE',
		jobs: [
			'Newsweek',
			'Fast Company',
			'National Journal'
		]
	},
	{
		person: 'Amanda Cormier',
		color: '#EECCAA',
		jobs: [
			'The New Yorker',
			'National Journal'
		]
	},
	{
		person: 'Michelle Cottle',
		color: '#BBCCDD',
		jobs: [
			'The New Republic',
			'The Daily Beast',
			'Newsweek',
			'National Journal'
		]
	},
	{
		person: 'Tom DeFrank',
		color: '#113355',
		jobs: [
			'Newsweek',
			'New York Daily News',
			'National Journal'
		]
	},
	{
		person: 'Andrea Drusch',
		color: '#553311',
		jobs: [
			'Politico',
			'National Journal'
		]
	},
	{
		person: 'Jennifer Duffy',
		color: '#553311',
		jobs: [
			'NRSC',
			'NBC News',
			'National Journal'
		]
	},	
	{
		person: 'Shirish Date',
		color: '#224466',
		jobs: [
			'Middletown Times-Herald Record',
			'Orlando Sentinel',
			'Associated Press',
			'Palm Beach Post',
			'NPR',
			'National Journal'
		]
	},
	{
		person: 'Alexia Fernandez Campbell',
		color: '#664422',
		jobs: [
			'Palm Beach Post',
			'South Florida Sentinel',
			'National Journal'
		]
	},
	{
		person: 'Ron Fournier',
		color: '#664422',
		jobs: [
			'Hot Springs Sentinel-Record',
			'Arkansas Democrat',
			'Associated Press',
			'National Journal'
		]
	},
	{
		person: 'Emily Cadei',
		color: '#773322',
		jobs: [
			'San Francisco Business Times',
			'National Journal',
			'The Economist',
			'CQ Roll Call',
			'OZY',
			'Newsweek'
		]
	},
	{
		person: 'Shane Harris',
		color: '#223377',
		jobs: [
			'Government Executive',
			'National Journal',
			'Washingtonian',
			'Foreign Policy',
			'New America Foundation',
			'The Daily Beast'
		]
	},
	{
		person: 'Shira Center',
		color: '#335588',
		jobs: [
			'The Daily Northwestern',
			'National Journal',
			'CQ Roll Call',
			'Politico',
			'CQ Roll Call',
			'Boston Globe'
		]
	},
	{
		person: 'Winter Casey',
		color: '#99FF88',
		jobs: [
			'National Journal',
			'Google',
			'U.S. Department of Commerce'
		]
	},
	{
		person: "Dan Beyers",
		color: '#DD44DD',
		jobs: [
			'The Journal Newspapers',
			'Washington Post',
		]
	},
	{
		person: 'Caitlin Dewey',
		color: '#EE3344',
		jobs: [
			'News21',
			'Kiplinger Washington Editors',
			'Washington Post'
		]
	},
	{
		person: 'Catherine Ho',
		color: '#883312',
		jobs: [
			'The Wichita Eagle',
			'The Daily Californian',
			'Detroit Free Press',
			'Los Angeles Times',
			'Los Angeles Daily Journal',
			'Washington Post'
		]
	},
	{
		person: 'Wesley Lowery',
		color: '#881155',
		jobs: [
			'Los Angeles Times',
			'Boston Globe',
			'Washington Post'
		]
	},
	{
		person: 'Lynh Bui',
		color: '#882266',
		jobs: [
			'Arizona Republic',
			'American University',
			'Washington Post'
		]
	},
	{
		person: 'Lindsey Bever',
		color: '#662288',
		jobs: [
			'Fort Worth Star-Telegram',
			'Dallas Morning News',
			'Columbia University',
			'The Guardian',
			'Washington Post'
		]
	}
]

jobs = []

for (var i=0; i < jsonObjs.length; i++) { 
	for (var j=0; j < jsonObjs[i].jobs.length; j++) { 
		if (jobs.indexOf(jsonObjs[i].jobs[j]) == -1) {
			jobs.push(jsonObjs[i].jobs[j]);
		}
	}
}

var graph = new Springy.Graph();

nodes = {}

for (var n=0; n < jobs.length; n++) {
	nodes[jobs[n]] = graph.newNode({label:jobs[n]});
}

for (var p=0; p < jsonObjs.length; p++) {
	for (var j=0; j < jsonObjs[p].jobs.length; j++) {
		if (j < jsonObjs[p].jobs.length - 1) {
			graph.newEdge(
					nodes[jsonObjs[p].jobs[j]], nodes[jsonObjs[p].jobs[j+1]], {label: jsonObjs[p].person, color: jsonObjs[p].color, ondoubleclick: function() {console.log(jsonObjs[p].person)}}
				);
		}
	}
}

jQuery(function(){
  var springy = window.springy = jQuery('#springydemo').springy({
    graph: graph,
    nodeSelected: function(node){
      console.log('Node selected: ' + JSON.stringify(node.data));
    }
  });
});
</script>

<canvas id="springydemo" width="1800" height="1600" />
</body>
</html>
